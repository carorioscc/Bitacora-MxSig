# ===========================================================
# MapFile generated by Soluciones Geomáticas
# Created by 
# With contributions from 
# Date: Septiembre 2013
#
# ===========================================================

MAP
	NAME "Servicio_WMS_INEGI"
	STATUS ON
	SHAPEPATH "C:/ImagenesGeoeyeRapideye" #Make sure this points to the root of the data folder (where all your shape or raster files are)
	SIZE 400 400
	IMAGECOLOR   255 255 255 #233 236 202 #
	IMAGETYPE png
	#EXTENT -119.9926 9.404 -85.1237 37.8468
	EXTENT -13345293.64051 1516510.64097 -9294742.63818 3991847.36461
	SYMBOLSET "/opt/map/mdm60/syms/symbolsdenue.sym"
	FONTSET "/opt/map/fonts/fonts.txt"
	DEBUG 0
	PROJECTION
	#"init=epsg:900913" 
	"init=epsg:900913"
	#"" 
	END
	UNITS DD
	#CONFIG PROJ_LIB "/ms4w/proj/nad/" 
	CONFIG  "MS_ERRORFILE" "/logs/mapserver/mdmTema.log"
	MAXSIZE 2200
	WEB 
		TEMPLATE "/opt/map/mdm60/mapserv_template.html"
		IMAGEPATH "/tmp"
		IMAGEURL "/tmp/"
		LOG "/tmp/cpv2010.log"
		METADATA 
			"max_extents" "-13345293.64051 1516510.64097 -9294742.63818 3991847.36461" #ka-map - to prevent navigation out of extents
			"ows_title" "Servicio WMS. (Mapa Digital de Mexico v5.0)"
			"ows_keywordlist" "WMS,OGC,MapServer,GeoNetwork"
			"ows_onlineresource" "http://gaia.inegi.org.mx/NLB/balancer.do?map=/opt/map/mdm5vector.map&amp&"
			"ows_service_onlineresource" "http://www.inegi.org.mx/"
			"ows_fees" "none"
			"ows_accessconstraints" "none"
			"ows_contactperson" "Aar&oacute;n Israel Villar Mata"
			"ows_contactorganization" "INEGI"
			"ows_contactposition" "Jefe de Dpto"
			"ows_addresstype" "postal"
			"ows_address" "Heroe de Nacozari 2301"
			"ows_city" "Aguascalientes"
			"ows_stateorprovince" "Aguascalientes"
			"ows_postcode" "20276"
			"ows_country" "M&aacute;xico"
			"ows_contactvoicetelephone" "+52 4499105300"
			"ows_contactfacsimiletelephone" "+52 4499105328"
			"ows_contactelectronicmailaddress" "aaron.villar@inegi.org.mx"
			"ows_srs" "EPSG:900913"
			"wms_attribution_onlineresource" "http://www.inegi.org.mx/"
			"wms_attribution_title" "INEGI"
			"wms_attribution_logourl_width" "20"
			"wms_attribution_logourl_height" "20"
			"wms_enable_request" "GetMap GetCapabilities GetLegendGraphic"
			"wms_attribution_logourl_format" "image/jpg"
			"wms_attribution_logourl_href" "http://mapserver.inegi.org.mx/images/logoINEGI.JPG"
			"wms_feature_info_mime_type" "text/html"
                        "wms_title" "Servicio BASE de información vectorial"
		END #end metadata 
	END #end web
	
	LAYER
		NAME 'd100'
		VALIDATION
			'MAPAESTATAL' '[0-9]'
		END		
		GROUP 'MGE'
		CONNECTIONTYPE postgis
		CONNECTION "user=postgres password=postgres dbname=mdm6data host=mxsig-db port=5432"
 		DATA "the_geom from (select color, gid, the_geom from getlayertemamat_estatal(getx1x2coords(!BOX!),'cpv2010.ent'::varchar, 'clavegeo'::varchar, '%MAPAESTATAL%'::varchar,590000,150000,'clavegeo'::varchar)as subqueryas(color character varying, cvegeo character varying, gid integer, the_geom geometry)) as t1 using unique gid using srid=900913" 
	
		
		PROCESSING "CLOSE_CONNECTION=DEFER"
		PROJECTION
			"init=epsg:900913"
		END #end projection
		METADATA 
			"queryable" "true"
			"ows_title" "Temático"
			"ows_abstract" ""
			"ows_keywordlist" ""
			"wms_extent" "-13345293.64051 1516510.64097 -9294742.63818 3991847.36461"
			"wms_group_title" "MGE"
			"wms_dataurl_format" "text/html"
			"wms_dataurl_href" "http://mapserver.inegi.org.mx/geografia/espanol/normatividad/metadatos/gateway.cfm?id="
			"wms_style_default_title" "default"
			"wms_format" "image/png"
			"ows_srs" "EPSG:900913"
			"wms_attribution_onlineresource" "http://www.inegi.org.mx/"
			"wms_attribution_title" "INEGI"
			"wms_attribution_logourl_width" "20"
			"wms_attribution_logourl_height" "20"
			"wms_attribution_logourl_format" "image/jpg"
			"wms_attribution_logourl_href" "http://mapserver.inegi.org.mx/images/logoINEGI.JPG"
			"RESULT_FIELDS" "cve_ent,nom_ent"
			"RESULT_HEADERS" "Clave Geoestadística,Nombre Entidad"
			END #end metadata 
		TYPE polygon
		STATUS on
		DEBUG 5
		TOLERANCE 8 #default is 3 for raster, 0 for vector
		##TEMPLATE "query.html"
		#LABELITEM nom_ent		
		  CLASS
  			NAME 'Temático estatal'
  			EXPRESSION ('[color]' ne '-6' and '[color]' ne '-9' and '[color]' ne '-8')
  			STYLE
  				OUTLINECOLOR 189 189 197
  				COLOR [color]
  				SIZE 3
  			END #end style		
		  END # end class
		   CLASS
  			NAME 'Temático estatal'
  			EXPRESSION ('[color]' = '-8' or '[color]' = '-2')
  			STYLE
  				OUTLINECOLOR 189 189 197
  				COLOR 0 0 0
				BACKGROUNDCOLOR 180 180 180
				symbol 'confidencial'
  				SIZE 7
  			END #end style		
		  END # end class
		   CLASS
  			NAME 'Temático estatal'
  			EXPRESSION ('[color]' = '-9' or '[color]' = '-3')
  			STYLE
  				#OUTLINECOLOR 189 189 197
  				COLOR 189 189 197
				#BACKGROUNDCOLOR 180 180 180
				#symbol 'sindato'
				symbol 'confidencial'
  				SIZE 7
  			END #end style		
		  END # end class
		     OPACITY  70	
	END #end layer
	
	LAYER
		NAME 'd101'
		VALIDATION
			'MAPAMUNICIPAL' '[0-9]'
		END	
		GROUP 'MGE'
		CONNECTIONTYPE postgis
		CONNECTION "user=postgres password=postgres dbname=mdm6data host=mxsig-db port=5432"
		DATA "the_geom from (select color, gid, the_geom from getlayertemamat_municipal(getx1x2coords(!BOX!),'cpv2010.mun'::varchar, 'clavegeo'::varchar, '%MAPAMUNICIPAL%'::varchar,590000,150000,'clavegeo'::varchar)as subqueryas(color character varying, cvegeo character varying, gid integer, the_geom geometry)) as t1 using unique gid using srid=900913" 
		PROCESSING "CLOSE_CONNECTION=DEFER"
		PROJECTION
			"init=epsg:900913"
		END #end projection
		METADATA 
			"queryable" "true"
			"ows_title" "Límite Estatal"
			"ows_abstract" ""
			"ows_keywordlist" ""
			"wms_extent" "-119.9926 9.404 -85.1237 37.8468"
			"wms_group_title" "MGE"
			"wms_dataurl_format" "text/html"
			"wms_dataurl_href" "http://mapserver.inegi.org.mx/geografia/espanol/normatividad/metadatos/gateway.cfm?id="
			"wms_style_default_title" "default"
			"wms_format" "image/png"
			"ows_srs" "EPSG:900913"
			"wms_attribution_onlineresource" "http://www.inegi.org.mx/"
			"wms_attribution_title" "INEGI"
			"wms_attribution_logourl_width" "20"
			"wms_attribution_logourl_height" "20"
			"wms_attribution_logourl_format" "image/jpg"
			"wms_attribution_logourl_href" "http://mapserver.inegi.org.mx/images/logoINEGI.JPG"
			"RESULT_FIELDS" "cve_ent,nom_ent"
			"RESULT_HEADERS" "Clave Geoestadística,Nombre Entidad"
			END #end metadata 
		TYPE polygon
		STATUS off
		DEBUG 5
		TOLERANCE 8 #default is 3 for raster, 0 for vector
		##TEMPLATE "query.html"
		##LABELITEM nom_ent	
		   
		 

		  CLASS
  		  NAME 'Temático municipal'
			#MINSCALEDENOM 1500000
  		  EXPRESSION ('[color]' ne '-1' and '[color]' ne '-6' and '[color]' ne '-9' and '[color]' ne '-8' and '[color]' ne '-99' and '[color]' ne '-3' and '[color]' ne '-2')
  			 STYLE
  				#OUTLINECOLOR 189 189 197
  				COLOR [color]
  				SIZE 3
  		  END #end style		
		  END # end class
		  CLASS
  			NAME 'Temático estatal'
			#MINSCALEDENOM 1500000
  			EXPRESSION ('[color]' = '-8')
  			STYLE
  				#OUTLINECOLOR 189 189 197
  				COLOR 0 0 0
				BACKGROUNDCOLOR 180 180 180
				symbol 'confidencial'
  				SIZE 7
  			END #end style		
		  END # end class
		 CLASS
  			NAME 'Temático estatal'
  			EXPRESSION ('[color]' = '-9' )
  			STYLE
  				#OUTLINECOLOR 189 189 197
  				COLOR 255 255 128
				#BACKGROUNDCOLOR 180 180 180
				#symbol 'sindato'
				symbol 'confidencial'
  				SIZE 7
  			END #end style		
		  END # end class
		 
		 CLASS
  			NAME 'Temático estatal'
  			EXPRESSION ('[color]' = '-99')
  			STYLE
  				OUTLINECOLOR 189 189 197
  				COLOR 0 0 0
				BACKGROUNDCOLOR 180 180 180
				symbol 'nosignifica'
  				SIZE 7
  			END #end style		
		  END # end class
		  CLASS
  			NAME 'Temático estatal'
  			EXPRESSION ('[color]' = '-3')
  			STYLE
  				OUTLINECOLOR 189 189 197
  				COLOR 255 255 255
				BACKGROUNDCOLOR 180 180 180
				#symbol 'sindato'
  				SIZE 7
  			END #end style		
		  END # end class
		   CLASS
  			NAME 'Temático estatal'
  			EXPRESSION ('[color]' = '-2' )
  			STYLE
  				#OUTLINECOLOR 189 189 197
  				COLOR 189 189 197
				#BACKGROUNDCOLOR 180 180 180
				#symbol 'sindato'
				symbol 'confidencial'
  				SIZE 7
  			END #end style		
		  END # end class
		  
		   OPACITY 70
	END #end layer
	
	
	
LAYER
		NAME 'd102'
		GROUP 'MGE'
			VALIDATION
			'MAPALOCALIDAD' '[0-9]'
		END	
		GROUP 'MGE'
		CONNECTIONTYPE postgis
		CONNECTION "user=postgres password=postgres dbname=mdm6data host=mxsig-db port=5432"
		DATA "the_geom from (select color, gid, the_geom from getlayertemamat_municipal(getx1x2coords(!BOX!),'cpv2010.loc_urb '::varchar, 'clavegeo'::varchar, '%MAPALOCALIDAD%'::varchar,590000,150000,'clavegeo'::varchar)as subqueryas(color character varying, cvegeo character varying, gid integer, the_geom geometry)) as t1 using unique gid using srid=900913" 
		PROCESSING "CLOSE_CONNECTION=DEFER"
		PROJECTION
			"init=epsg:900913"
		END #end projection
		METADATA 
			"queryable" "true"
			"ows_title" "Límite Estatal"
			"ows_abstract" ""
			"ows_keywordlist" ""
			"wms_extent" "-119.9926 9.404 -85.1237 37.8468"
			"wms_group_title" "MGE"
			"wms_dataurl_format" "text/html"
			"wms_dataurl_href" "http://mapserver.inegi.org.mx/geografia/espanol/normatividad/metadatos/gateway.cfm?id="
			"wms_style_default_title" "default"
			"wms_format" "image/png"
			"ows_srs" "EPSG:900913"
			"wms_attribution_onlineresource" "http://www.inegi.org.mx/"
			"wms_attribution_title" "INEGI"
			"wms_attribution_logourl_width" "20"
			"wms_attribution_logourl_height" "20"
			"wms_attribution_logourl_format" "image/jpg"
			"wms_attribution_logourl_href" "http://mapserver.inegi.org.mx/images/logoINEGI.JPG"
			"RESULT_FIELDS" "cve_ent,nom_ent"
			"RESULT_HEADERS" "Clave Geoestadística,Nombre Entidad"
			END #end metadata 
		TYPE polygon
		STATUS off
		DEBUG 0
		TOLERANCE 8 #default is 3 for raster, 0 for vector
		##TEMPLATE "query.html"
		##LABELITEM nom_ent	
		   
		 

		  CLASS
  		  NAME 'Temático municipal'
			#MINSCALEDENOM 1500000
  		  EXPRESSION ('[color]' ne '-1' and '[color]' ne '-6' and '[color]' ne '-9' and '[color]' ne '-8')
  			 STYLE
  				#OUTLINECOLOR 189 189 197
  				COLOR [color]
  				SIZE 3
  		  END #end style		
		  END # end class
		  CLASS
  			NAME 'Temático estatal'
			#MINSCALEDENOM 1500000
  			EXPRESSION ('[color]' = '-8')
  			STYLE
  				#OUTLINECOLOR 189 189 197
  				COLOR 0 0 0
				BACKGROUNDCOLOR 180 180 180
				symbol 'confidencial'
  				SIZE 7
  			END #end style		
		  END # end class
		 CLASS
  			NAME 'Temático estatal'
  			EXPRESSION ('[color]' = '-9')
  			STYLE
  				#OUTLINECOLOR 189 189 197
  				COLOR 255 255 128
				#BACKGROUNDCOLOR 180 180 180
				#symbol 'sindato'
				symbol 'confidencial'
  				SIZE 7
  			END #end style		
		  END # end class
		 
		   OPACITY 70
	END #end layer
	

	
	
LAYER
		NAME 'd109'
		GROUP 'MGE'
			VALIDATION
			'MAPAAGEB' '[0-9]'
		END	
		GROUP 'MGE'
		CONNECTIONTYPE postgis
		CONNECTION "user=postgres password=postgres dbname=mdm6data host=mxsig-db port=5432"
		DATA "the_geom from (select color, gid, the_geom from getlayertemamat_municipal(getx1x2coords(!BOX!),'cpv2010.ageb '::varchar, 'clavegeo'::varchar, '%MAPAAGEB%'::varchar,590000,150000,'clavegeo'::varchar)as subqueryas(color character varying, cvegeo character varying, gid integer, the_geom geometry)) as t1 using unique gid using srid=900913" 
		PROCESSING "CLOSE_CONNECTION=DEFER"
		PROJECTION
			"init=epsg:900913"
		END #end projection
		METADATA 
			"queryable" "true"
			"ows_title" "Límite Estatal"
			"ows_abstract" ""
			"ows_keywordlist" ""
			"wms_extent" "-119.9926 9.404 -85.1237 37.8468"
			"wms_group_title" "MGE"
			"wms_dataurl_format" "text/html"
			"wms_dataurl_href" "http://mapserver.inegi.org.mx/geografia/espanol/normatividad/metadatos/gateway.cfm?id="
			"wms_style_default_title" "default"
			"wms_format" "image/png"
			"ows_srs" "EPSG:900913"
			"wms_attribution_onlineresource" "http://www.inegi.org.mx/"
			"wms_attribution_title" "INEGI"
			"wms_attribution_logourl_width" "20"
			"wms_attribution_logourl_height" "20"
			"wms_attribution_logourl_format" "image/jpg"
			"wms_attribution_logourl_href" "http://mapserver.inegi.org.mx/images/logoINEGI.JPG"
			"RESULT_FIELDS" "cve_ent,nom_ent"
			"RESULT_HEADERS" "Clave Geoestadística,Nombre Entidad"
			END #end metadata 
		TYPE polygon
		STATUS off
		DEBUG 0
		TOLERANCE 8 #default is 3 for raster, 0 for vector
		##TEMPLATE "query.html"
		##LABELITEM nom_ent	
		   
		 

		  CLASS
  		  NAME 'Temático municipal'
			#MINSCALEDENOM 1500000
  		  EXPRESSION ('[color]' ne '-1' and '[color]' ne '-6' and '[color]' ne '-9' and '[color]' ne '-8')
  			 STYLE
  				#OUTLINECOLOR 189 189 197
  				COLOR [color]
  				SIZE 3
  		  END #end style		
		  END # end class
		  CLASS
  			NAME 'Temático estatal'
			#MINSCALEDENOM 1500000
  			EXPRESSION ('[color]' = '-8')
  			STYLE
  				#OUTLINECOLOR 189 189 197
  				COLOR 0 0 0
				BACKGROUNDCOLOR 180 180 180
				symbol 'confidencial'
  				SIZE 7
  			END #end style		
		  END # end class
		 CLASS
  			NAME 'Temático estatal'
  			EXPRESSION ('[color]' = '-9')
  			STYLE
  				#OUTLINECOLOR 189 189 197
  				COLOR 255 255 128
				#BACKGROUNDCOLOR 180 180 180
				#symbol 'sindato'
				symbol 'confidencial'
  				SIZE 7
  			END #end style		
		  END # end class
		 
		   OPACITY 70
	END #end layer
	
	
	
	
	LAYER
		NAME 'd201'
		GROUP 'MGE'
			VALIDATION
			'MAPAZM' '[0-9]'
		END	
		GROUP 'MGE'
		CONNECTIONTYPE postgis
		CONNECTION "user=postgres password=postgres dbname=mdm6data host=mxsig-db port=5432"
		DATA "the_geom from (select color, gid, the_geom from getlayertemamat_municipal(getx1x2coords(!BOX!),'cpv2010.zm '::varchar, 'clavegeo'::varchar, '%MAPAZM%'::varchar,590000,150000,'clavegeo'::varchar)as subqueryas(color character varying, cvegeo character varying, gid integer, the_geom geometry)) as t1 using unique gid using srid=900913" 
		PROCESSING "CLOSE_CONNECTION=DEFER"
		PROJECTION
			"init=epsg:900913"
		END #end projection
		METADATA 
			"queryable" "true"
			"ows_title" "Límite zona metropolitana"
			"ows_abstract" ""
			"ows_keywordlist" ""
			"wms_extent" "-119.9926 9.404 -85.1237 37.8468"
			"wms_group_title" "MGE"
			"wms_dataurl_format" "text/html"
			"wms_dataurl_href" "http://mapserver.inegi.org.mx/geografia/espanol/normatividad/metadatos/gateway.cfm?id="
			"wms_style_default_title" "default"
			"wms_format" "image/png"
			"ows_srs" "EPSG:900913"
			"wms_attribution_onlineresource" "http://www.inegi.org.mx/"
			"wms_attribution_title" "INEGI"
			"wms_attribution_logourl_width" "20"
			"wms_attribution_logourl_height" "20"
			"wms_attribution_logourl_format" "image/jpg"
			"wms_attribution_logourl_href" "http://mapserver.inegi.org.mx/images/logoINEGI.JPG"
			"RESULT_FIELDS" "cve_ent,nom_ent"
			"RESULT_HEADERS" "Clave Geoestadística,Nombre Entidad"
			END #end metadata 
		TYPE polygon
		STATUS off
		DEBUG 0
		TOLERANCE 8 #default is 3 for raster, 0 for vector
		##TEMPLATE "query.html"
		##LABELITEM nom_ent	
		   
		 

		  CLASS
  		  NAME 'Temático municipal'
			#MINSCALEDENOM 1500000
  		  EXPRESSION ('[color]' ne '-1' and '[color]' ne '-6' and '[color]' ne '-9' and '[color]' ne '-8')
  			 STYLE
  				#OUTLINECOLOR 189 189 197
  				COLOR [color]
  				SIZE 3
  		  END #end style		
		  END # end class
		  CLASS
  			NAME 'Temático estatal'
			#MINSCALEDENOM 1500000
  			EXPRESSION ('[color]' = '-8')
  			STYLE
  				#OUTLINECOLOR 189 189 197
  				COLOR 0 0 0
				BACKGROUNDCOLOR 180 180 180
				symbol 'confidencial'
  				SIZE 7
  			END #end style		
		  END # end class
		 CLASS
  			NAME 'Temático estatal'
  			EXPRESSION ('[color]' = '-9')
  			STYLE
  				#OUTLINECOLOR 189 189 197
  				COLOR 255 255 128
				#BACKGROUNDCOLOR 180 180 180
				#symbol 'sindato'
				symbol 'confidencial'
  				SIZE 7
  			END #end style		
		  END # end class
		 
		   OPACITY 70
	END #end layer
	
	
########################## fin ip ################################################
	LEGEND
		STATUS ON
		IMAGECOLOR 255 255 255 #233 236 202 # 238 238 238
#		POSITION LL
		KEYSIZE 16 10
		KEYSPACING 10 10 
		LABEL
			TYPE truetype
			FONT arial
			SIZE 8
			COLOR 90 90 90
		END  # end Label
	END # end Legend
	
	SCALEBAR
		STATUS on
		POSITION lc
		STYLE 0
		INTERVALS 3
		SIZE 129 3
		IMAGECOLOR  255 255 255
		LABEL
			COLOR 0 0 0
			SIZE 1
		END  # end label
		OUTLINECOLOR 0 0 0
		COLOR  0 0 0
		BACKGROUNDCOLOR  255 255 255
		UNITS kilometers
	END   # end scalebar
	
	REFERENCE
		EXTENT 299819.4023 -134216.153 4695934.1014 2714439.6185
		IMAGE "../images/reference.jpg"
		SIZE 200 100
		COLOR -1 -1 -1
		OUTLINECOLOR 255 0 0
	END  # end reference
	
	OUTPUTFORMAT
		NAME "png"
		MIMETYPE "image/png"
		DRIVER  "GD/PNG" # "AGG/PNG"  # 
		EXTENSION "png"
		IMAGEMODE "RGBA" #"PC256"  # "RGBA"
		#TRANSPARENT true
	END #end outputformat

	
END #end map
	